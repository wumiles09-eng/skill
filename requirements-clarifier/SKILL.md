---
name: requirements-clarifier
description: 通过结构化提问把模糊想法转化为清晰需求（用户/目标/范围/流程/数据/非功能）。输出PRD骨架或Given-When-Then验收标准。当需求不清晰、验收标准未定义、边界条件模糊时使用。
---

# Requirements Clarifier - 需求澄清器

## 目标

通过核心问题清单，把用户的模糊想法转化为可交付的需求文档。

## 核心原则

### 1. 从模糊到清晰
- 将用户的模糊想法转化为结构化需求
- 通过提问引导用户明确需求边界
- 避免主观臆断，所有假设必须确认

### 2. 业务语言优先
- 使用 PM 和业务人员能理解的语言
- 避免技术术语堆砌
- 关注业务价值和用户体验

### 3. 渐进式细化
- 先确定大框架，再填充细节
- 每个阶段都要获得确认
- 支持迭代优化

## 核心问题清单

### 1. 用户与目标
- **目标用户**: 谁会使用这个功能？
- **核心价值**: 解决什么问题？
- **业务目标**: 期望达到什么效果？（用户量、收入、留存率等）

### 2. 范围与边界
- **做什么**: 核心功能是什么？
- **不做什么**: 明确排除的内容？
- **优先级**: P0/MVP vs P1/增强 vs P2/未来

### 3. 流程与交互
- **用户场景**: 用户在什么情况下使用？
- **主要流程**: 正常路径是什么样的？
- **分支流程**: 异常情况如何处理？
- **边界条件**: 最小值/最大值/限制？

### 4. 数据与依赖
- **数据输入**: 需要什么数据？
- **数据输出**: 产生什么结果？
- **外部依赖**: 依赖哪些服务/系统？
- **数据源**: 数据从哪里来？

### 5. 非功能需求
- **性能**: 响应时间/并发量/吞吐量要求？
- **安全**: 权限/加密/隐私要求？
- **兼容性**: 支持的平台/浏览器/版本？
- **可用性**: uptime要求？

## 输出格式

### PRD骨架

```markdown
# {功能名称} PRD

## 1. 产品概述
### 1.1 目标用户
- 主要用户: {描述}
- 次要用户: {描述}

### 1.2 核心价值
- 解决的问题: {描述}
- 业务价值: {描述}

## 2. 功能需求
### 2.1 功能清单
| 功能 | 优先级 | 描述 | 验收标准 |
|------|--------|------|---------|
| 功能1 | P0 | ... | ... |

### 2.2 用户故事
**作为** {用户角色}
**我想要** {功能}
**以便于** {价值}

## 3. 验收标准 (Given-When-Then)
### 场景1: {场景名称}
**Given** {前置条件}
**When** {操作}
**Then** {预期结果}

## 4. 边界条件
- 最小值: {限制}
- 最大值: {限制}
- 异常处理: {描述}

## 5. 待确认项
| 序号 | 待确认内容 | 影响 | 优先级 |
|-----|----------|------|--------|
```

### Given-When-Then模板

```markdown
## 验收标准

### 场景1: 用户登录成功
**Given** 用户在登录页面
**When** 输入有效的邮箱和密码
**Then** 跳转到主页
**And** 显示用户名

### 场景2: 登录失败
**Given** 用户在登录页面
**When** 输入错误的密码
**Then** 显示"邮箱或密码错误"提示
**And** 保持在登录页面
```

## 执行流程

### Step 1: 需求收集

使用核心问题清单进行结构化提问：

```
1. 这个功能要解决什么问题？
2. 目标用户是谁？他们的特征是什么？
3. 用户在什么场景下会使用？
4. 期望的业务目标是什么？
5. 有哪些必须做的功能（P0）？哪些是可选的（P1/P2）？
6. 有时间和预算限制吗？
7. 有技术栈偏好吗？
```

### Step 2: 生成PRD骨架

根据收集的信息，生成PRD骨架：
- 产品概述（1.1-1.2）
- 功能清单（2.1）
- 核心功能的验收标准（2.2，使用Given-When-Then）
- 待确认项清单

### Step 3: 输出与确认

**输出位置**:
- `.work/prd.md` - 工作目录
- 或 `obsidian://vault/projects/{project}/prd.md` - Obsidian集成

**确认检查点**:
- [ ] 目标用户明确
- [ ] 核心功能已列出
- [ ] 业务规则已定义
- [ ] 验收标准可量化
- [ ] 功能边界明确

## 与其他技能的集成

### 下一步技能

- `prd-generator` - 生成完整PRD（业务语言+Mermaid）
- `architecture-designer` - 进入架构设计阶段
- `tech-proposal` - 技术方案评估

### 协作技能

- `optimize-iteration-spec` - 检查和优化迭代文档
- `ui-ux-design-system-generator` - 生成设计系统
- `workflow-orchestrator` - 流程编排

## 典型场景

### 场景1: 模糊想法

**用户**: "我想加一个登录功能"

**澄清提问**:
1. 登录方式有哪些？（邮箱/手机/第三方）
2. 是否需要"记住我"功能？
3. 忘记密码怎么处理？
4. 是否需要访客模式？
5. 登录后跳转到哪里？

**输出**: PRD骨架 + Given-When-Then验收标准

### 场景2: 功能优化

**用户**: "搜索太慢了，需要优化"

**澄清提问**:
1. 当前速度是多少？期望速度是多少？
2. 数据量有多大？
3. 搜索频率如何？
4. 是否可以接受异步处理？
5. 优化后的验收标准是什么？

**输出**: 优化需求说明 + 性能指标对比

## 质量检查清单

### 内容完整性
- [ ] 目标用户明确
- [ ] 核心功能已列出
- [ ] 业务规则已定义
- [ ] 验收标准可量化
- [ ] 功能边界明确（做什么/不做什么）

### 可读性
- [ ] 使用业务语言，避免技术术语
- [ ] 场景描述清晰
- [ ] 表格格式规范
- [ ] 章节层级清晰

### 可执行性
- [ ] 功能边界明确
- [ ] 优先级已标注（P0/P1/P2）
- [ ] 验收标准可测试
- [ ] 待确认项已列出

---

**维护**: 根据实际使用经验持续优化
**来源**: Cursor Hi Offer requirements-clarifier
**相关**: prd-generator, optimize-iteration-spec, architecture-designer
